import { createMemoryRouter, RouterProvider } from 'react-router'
import { describe, expect, it } from 'vitest'
import { routes } from '../../core/router/router'
import { render, screen } from '@testing-library/react'
import { cards } from '../../mocks/mockedData/cards'

describe('Details component', () => {
  it('Component opens if search param "details=" exists', () => {
    const router = createMemoryRouter(routes, {
      initialEntries: ['?page=1&details=1'],
    })
    render(<RouterProvider router={router} />)

    const details = screen.getByTestId('details')
    expect(details).toBeInTheDocument()
  })
  it('The component displays data', async () => {
    const router = createMemoryRouter(routes, {
      initialEntries: ['?details=4'],
    })
    render(<RouterProvider router={router} />)

    const details = await screen.findByText(cards.results[0].name)
    expect(details).toBeInTheDocument()
  })
})
